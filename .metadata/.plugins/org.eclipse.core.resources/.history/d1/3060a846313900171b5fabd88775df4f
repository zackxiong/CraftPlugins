package gui.panels.controlPanel;

import gui.Gui;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;

public class FileChooserPanel extends JPanel{

	private static final long serialVersionUID = -6143438348516086903L; 
	
	public FilePanel fileChooser = new FilePanel();
	public CommandPanel commandChooser = new CommandPanel();
	
	public FileChooserPanel(){
		this.add(fileChooser);
		this.add(commandChooser);
		Gui.log("Chooser init.");
	}
	
}

class FilePanel extends JPanel implements ActionListener{
	JLabel pathLabel = new JLabel("Chooser a file");
	JButton selectButton = new JButton("Choose");
	JButton clearButton = new JButton("Clear");
	JFileChooser fileChooser = new JFileChooser("D:\\");
	File selectedFile;
	
	public FilePanel(){
		clearButton.setActionCommand("clear");
		selectButton.setActionCommand("select");
		this.add(pathLabel);
		this.add(selectButton);
		this.add(clearButton);
		this.selectButton.addActionListener(this);
		Gui.log("File chooser init.");
	}
	
	public File select(){
		fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
		int returnVal = fileChooser.showOpenDialog(fileChooser);
		if(returnVal == JFileChooser.FILES_ONLY){
			this.selectedFile = this.fileChooser.getSelectedFile();
			this.pathLabel.setText(this.selectedFile.getAbsolutePath());
			return fileChooser.getSelectedFile();
		}
		return (File)null;
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		if(e.getActionCommand()=="enter"){
			this.select();
		}
		if(e.getActionCommand()=="clear"){
			Gui.getTester().clearFile();
		}
	}
}

class CommandPanel extends JPanel implements ActionListener{
	JButton enterButton = new JButton("Enter");
	JButton clearButton = new JButton("Clear");
	JTextArea commandBox = new JTextArea();
	
	public CommandPanel(){
		enterButton.setActionCommand("enter");
		clearButton.setActionCommand("clear");
		this.add(clearButton);
		this.add(enterButton);
		this.add(commandBox);
		this.enterButton.addActionListener(this);
		this.clearButton.addActionListener(this);
		Gui.log("Command chooser init.");
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		if(e.getActionCommand()=="enter"){
			Gui.getTester().useCommand(command);
		}
		if(e.getActionCommand()=="clear"){
			Gui.getTester().clearCommand();
		}
	}
}


